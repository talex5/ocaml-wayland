<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wl_shm_pool (wayland.Wayland.Wayland_client.Wl_shm_pool)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">wayland</a> &#x00BB; <a href="../../index.html">Wayland</a> &#x00BB; <a href="../index.html">Wayland_client</a> &#x00BB; Wl_shm_pool</nav><header class="odoc-preamble"><h1>Module <code><span>Wayland_client.Wl_shm_pool</span></code></h1><p>A shared memory pool.</p><p>The wl_shm_pool object encapsulates a piece of memory shared between the compositor and client. Through the wl_shm_pool object, the client can allocate shared memory wl_buffer objects. All objects created through the same pool share the same underlying mapped memory. Reusing the mapped memory avoids the setup/teardown overhead and is useful when interactively resizing a surface or for many small buffers.</p></header><nav class="odoc-toc"><ul><li><a href="#version-1,-2">Version 1, 2</a></li><li><a href="#handlers">Handlers</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'v t</span></span><span> = <span><span>(<span>[ `Wl_shm_pool ]</span>, <span class="type-var">'v</span>, <span>[ `Client ]</span>)</span> <a href="../../Proxy/index.html#type-t">Proxy.t</a></span></span></code></div></div><h3 id="version-1,-2"><a href="#version-1,-2" class="anchor"></a>Version 1, 2</h3><div class="odoc-spec"><div class="spec value anchored" id="val-resize"><a href="#val-resize" class="anchor"></a><code><span><span class="keyword">val</span> resize : <span><span><span>[&lt; `V1 <span>| `V2</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">size</span>:int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the size of the pool mapping.</p><p>This request will cause the server to remap the backing memory for the pool from the file descriptor passed when the pool was created, but using the new size. This request can only be used to make the pool bigger.</p><p>This request only changes the amount of bytes that are mmapped by the server and does not touch the file corresponding to the file descriptor passed at creation time. It is the client's responsibility to ensure that the file is at least as big as the new pool size.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-destroy"><a href="#val-destroy" class="anchor"></a><code><span><span class="keyword">val</span> destroy : <span><span><span>[&lt; `V1 <span>| `V2</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Destroy the pool.</p><p>Destroy the shared memory pool.</p><p>The mmapped memory will be released when all buffers that have been created from this pool are gone.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_buffer"><a href="#val-create_buffer" class="anchor"></a><code><span><span class="keyword">val</span> create_buffer : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>[<span>[ `Wl_buffer ]</span>, <span>[ `V1 ]</span>, <span>[ `Client ]</span>]</span> <a href="../../Proxy/Handler/class-type-t/index.html">Proxy.Handler.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">offset</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">width</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">height</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">stride</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">format</span>:<span class="xref-unresolved">{Imports}1.Wl_shm.Format.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>[ `Wl_buffer ]</span>, <span>[ `V1 ]</span>, <span>[ `Client ]</span>)</span> <a href="../../Proxy/index.html#type-t">Proxy.t</a></span></span></code></div><div class="spec-doc"><p>Create a buffer from the pool.</p><p>Create a wl_buffer object from the pool.</p><p>The buffer is created offset bytes into the pool and has width and height as specified. The stride argument specifies the number of bytes from the beginning of one row to the beginning of the next. The format is the pixel format of the buffer and must be one of those advertised through the wl_shm.format event.</p><p>A buffer will keep a reference to the pool it was created from so it is valid to destroy the pool immediately after creating a buffer from it.</p></div></div><h3 id="handlers"><a href="#handlers" class="anchor"></a>Handlers</h3><p>Note: Servers will always want to use <code>v1</code>.</p><div class="odoc-spec"><div class="spec class anchored" id="class-v1"><a href="#class-v1" class="anchor"></a><code><span><span class="keyword">class</span> +'a </span><span><a href="class-v1/index.html">v1</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 1.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v2"><a href="#class-v2" class="anchor"></a><code><span><span class="keyword">class</span> +'a </span><span><a href="class-v2/index.html">v2</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 2.</p></div></div></div></body></html>
