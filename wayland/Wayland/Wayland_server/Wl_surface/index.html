<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wl_surface (wayland.Wayland.Wayland_server.Wl_surface)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">wayland</a> &#x00BB; <a href="../../index.html">Wayland</a> &#x00BB; <a href="../index.html">Wayland_server</a> &#x00BB; Wl_surface</nav><header class="odoc-preamble"><h1>Module <code><span>Wayland_server.Wl_surface</span></code></h1><p>An onscreen surface.</p><p>A surface is a rectangular area that may be displayed on zero or more outputs, and shown any number of times at the compositor's discretion. They can present wl_buffers, receive user input, and define a local coordinate system.</p><p>The size of a surface (and relative positions on it) is described in surface-local coordinates, which may differ from the buffer coordinates of the pixel content, in case a buffer_transform or a buffer_scale is used.</p><p>A surface without a &quot;role&quot; is fairly useless: a compositor does not know where, when or how to present it. The role is the purpose of a wl_surface. Examples of roles are a cursor for a pointer (as set by wl_pointer.set_cursor), a drag icon (wl_data_device.start_drag), a sub-surface (wl_subcompositor.get_subsurface), and a window as defined by a shell protocol (e.g. wl_shell.get_shell_surface).</p><p>A surface can have only one role at a time. Initially a wl_surface does not have a role. Once a wl_surface is given a role, it is set permanently for the whole lifetime of the wl_surface object. Giving the current role again is allowed, unless explicitly forbidden by the relevant interface specification.</p><p>Surface roles are given by requests in other interfaces such as wl_pointer.set_cursor. The request should explicitly mention that this request gives a role to a wl_surface. Often, this request also creates a new protocol object that represents the role and adds additional functionality to wl_surface. When a client wants to destroy a wl_surface, they must destroy this role object before the wl_surface, otherwise a defunct_role_object error is sent.</p><p>Destroying the role object does not remove the role from the wl_surface, but it may stop the wl_surface from &quot;playing the role&quot;. For instance, if a wl_subsurface object is destroyed, the wl_surface it was created for will be unmapped and forget its position and z-order. It is allowed to create a wl_subsurface for the same wl_surface again, but it is not allowed to use the wl_surface as a cursor (cursor is a different role than sub-surface, and role switching is not allowed).</p></header><nav class="odoc-toc"><ul><li><a href="#version-1">Version 1</a></li><li><a href="#version-2">Version 2</a></li><li><a href="#version-3">Version 3</a></li><li><a href="#version-4">Version 4</a></li><li><a href="#version-5">Version 5</a></li><li><a href="#version-6">Version 6</a></li><li><a href="#handlers">Handlers</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'v t</span></span><span> = <span><span>(<span>[ `Wl_surface ]</span>, <span class="type-var">'v</span>, <span>[ `Server ]</span>)</span> <a href="../../Proxy/index.html#type-t">Proxy.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> Error</span><span> = <a href="../../Wayland_proto/Wl_surface/Error/index.html">Wayland_proto.Wl_surface.Error</a></span></code></div></div><h3 id="version-1"><a href="#version-1" class="anchor"></a>Version 1</h3><div class="odoc-spec"><div class="spec value anchored" id="val-leave"><a href="#val-leave" class="anchor"></a><code><span><span class="keyword">val</span> leave : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> <span>| `V5</span> <span>| `V6</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">output</span>:<span><span>(<span>[ `Wl_output ]</span>, <span class="type-var">'a</span>, <span>[ `Server ]</span>)</span> <a href="../../Proxy/index.html#type-t">Proxy.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Surface leaves an output.</p><p>This is emitted whenever a surface's creation, movement, or resizing results in it no longer having any part of it within the scanout region of an output.</p><p>Clients should not use the number of outputs the surface is on for frame throttling purposes. The surface might be hidden even if no leave event has been sent, and the compositor might expect new surface content updates even if no enter event has been sent. The frame event should be used instead.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enter"><a href="#val-enter" class="anchor"></a><code><span><span class="keyword">val</span> enter : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> <span>| `V5</span> <span>| `V6</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">output</span>:<span><span>(<span>[ `Wl_output ]</span>, <span class="type-var">'a</span>, <span>[ `Server ]</span>)</span> <a href="../../Proxy/index.html#type-t">Proxy.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Surface enters an output.</p><p>This is emitted whenever a surface's creation, movement, or resizing results in some part of it being within the scanout region of an output.</p><p>Note that a surface may be overlapping with zero or more outputs.</p></div></div><h3 id="version-2"><a href="#version-2" class="anchor"></a>Version 2</h3><h3 id="version-3"><a href="#version-3" class="anchor"></a>Version 3</h3><h3 id="version-4"><a href="#version-4" class="anchor"></a>Version 4</h3><h3 id="version-5"><a href="#version-5" class="anchor"></a>Version 5</h3><h3 id="version-6"><a href="#version-6" class="anchor"></a>Version 6</h3><div class="odoc-spec"><div class="spec value anchored" id="val-preferred_buffer_transform"><a href="#val-preferred_buffer_transform" class="anchor"></a><code><span><span class="keyword">val</span> preferred_buffer_transform : 
  <span><span><span>[&lt; `V6 ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">transform</span>:<span class="xref-unresolved">{Imports}1.Wl_output.Transform.t</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Preferred buffer transform for the surface.</p><p>This event indicates the preferred buffer transform for this surface. It is sent whenever the compositor's preference changes.</p><p>Before receiving this event the preferred buffer transform for this surface is normal.</p><p>It is intended that transform aware clients use this event to apply the transform to their content and use wl_surface.set_buffer_transform to indicate the transform they have rendered with.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-preferred_buffer_scale"><a href="#val-preferred_buffer_scale" class="anchor"></a><code><span><span class="keyword">val</span> preferred_buffer_scale : <span><span><span>[&lt; `V6 ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">factor</span>:int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Preferred buffer scale for the surface.</p><p>This event indicates the preferred buffer scale for this surface. It is sent whenever the compositor's preference changes.</p><p>Before receiving this event the preferred buffer scale for this surface is 1.</p><p>It is intended that scaling aware clients use this event to scale their content and use wl_surface.set_buffer_scale to indicate the scale they have rendered with. This allows clients to supply a higher detail buffer.</p><p>The compositor shall emit a scale value greater than 0.</p></div></div><h3 id="handlers"><a href="#handlers" class="anchor"></a>Handlers</h3><p>Note: Servers will always want to use <code>v1</code>.</p><div class="odoc-spec"><div class="spec class anchored" id="class-v1"><a href="#class-v1" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v1/index.html">v1</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 1.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v2"><a href="#class-v2" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v2/index.html">v2</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 2.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v3"><a href="#class-v3" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v3/index.html">v3</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 3.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v4"><a href="#class-v4" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v4/index.html">v4</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 4.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v5"><a href="#class-v5" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v5/index.html">v5</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 5.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v6"><a href="#class-v6" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v6/index.html">v6</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 6.</p></div></div></div></body></html>
