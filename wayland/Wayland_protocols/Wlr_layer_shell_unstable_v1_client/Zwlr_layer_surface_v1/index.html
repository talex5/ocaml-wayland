<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Zwlr_layer_surface_v1 (wayland.Wayland_protocols.Wlr_layer_shell_unstable_v1_client.Zwlr_layer_surface_v1)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v2.3.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">wayland</a> &#x00BB; <a href="../../index.html">Wayland_protocols</a> &#x00BB; <a href="../index.html">Wlr_layer_shell_unstable_v1_client</a> &#x00BB; Zwlr_layer_surface_v1</nav><header class="odoc-preamble"><h1>Module <code><span>Wlr_layer_shell_unstable_v1_client.Zwlr_layer_surface_v1</span></code></h1><p>Layer metadata interface.</p><p>An interface that may be implemented by a wl_surface, for surfaces that are designed to be rendered as a layer of a stacked desktop-like environment.</p><p>Layer surface state (layer, size, anchor, exclusive zone, margin, interactivity) is double-buffered, and will be applied at the time wl_surface.commit of the corresponding wl_surface is called.</p><p>Attaching a null buffer to a layer surface unmaps it.</p><p>Unmapping a layer_surface means that the surface cannot be shown by the compositor until it is explicitly mapped again. The layer_surface returns to the state it had right after layer_shell.get_layer_surface. The client can re-map the surface by performing a commit without any buffer attached, waiting for a configure event and handling it as usual.</p></header><nav class="odoc-toc"><ul><li><a href="#version-1">Version 1</a></li><li><a href="#version-2,-3,-4">Version 2, 3, 4</a></li><li><a href="#handlers">Handlers</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'v t</span></span><span> = <span><span>(<span>[ `Zwlr_layer_surface_v1 ]</span>, <span class="type-var">'v</span>, <span>[ `Client ]</span>)</span> <a href="../../../Wayland/Proxy/index.html#type-t">Wayland.Proxy.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Keyboard_interactivity"><a href="#module-Keyboard_interactivity" class="anchor"></a><code><span><span class="keyword">module</span> Keyboard_interactivity</span><span> =
  <a href="../../Wlr_layer_shell_unstable_v1_proto/Zwlr_layer_surface_v1/Keyboard_interactivity/index.html">Wlr_layer_shell_unstable_v1_proto.Zwlr_layer_surface_v1.Keyboard_interactivity</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> Error</span><span> = <a href="../../Wlr_layer_shell_unstable_v1_proto/Zwlr_layer_surface_v1/Error/index.html">Wlr_layer_shell_unstable_v1_proto.Zwlr_layer_surface_v1.Error</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Anchor"><a href="#module-Anchor" class="anchor"></a><code><span><span class="keyword">module</span> Anchor</span><span> = <a href="../../Wlr_layer_shell_unstable_v1_proto/Zwlr_layer_surface_v1/Anchor/index.html">Wlr_layer_shell_unstable_v1_proto.Zwlr_layer_surface_v1.Anchor</a></span></code></div></div><h3 id="version-1"><a href="#version-1" class="anchor"></a>Version 1</h3><div class="odoc-spec"><div class="spec value anchored" id="val-destroy"><a href="#val-destroy" class="anchor"></a><code><span><span class="keyword">val</span> destroy : <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Destroy the layer_surface.</p><p>This request destroys the layer surface.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ack_configure"><a href="#val-ack_configure" class="anchor"></a><code><span><span class="keyword">val</span> ack_configure : <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">serial</span>:int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Ack a configure event.</p><p>When a configure event is received, if a client commits the surface in response to the configure event, then the client must make an ack_configure request sometime before the commit request, passing along the serial of the configure event.</p><p>If the client receives multiple configure events before it can respond to one, it only has to ack the last configure event.</p><p>A client is not required to commit immediately after sending an ack_configure request - it may even ack_configure several times before its next surface commit.</p><p>A client may send multiple ack_configure requests before committing, but only the last request sent before a commit indicates which configure event the client really is responding to.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_popup"><a href="#val-get_popup" class="anchor"></a><code><span><span class="keyword">val</span> get_popup : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">popup</span>:<span><span>(<span>[ `Xdg_popup ]</span>, <span class="type-var">'a</span>, <span>[ `Client ]</span>)</span> <a href="../../../Wayland/Proxy/index.html#type-t">Wayland.Proxy.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Assign this layer_surface as an xdg_popup parent.</p><p>This assigns an xdg_popup's parent to this layer_surface. This popup should have been created via xdg_surface::get_popup with the parent set to NULL, and this request must be invoked before committing the popup's initial state.</p><p>See the documentation of xdg_popup for more details about what an xdg_popup is and how it is used.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_keyboard_interactivity"><a href="#val-set_keyboard_interactivity" class="anchor"></a><code><span><span class="keyword">val</span> set_keyboard_interactivity : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">keyboard_interactivity</span>:
    <span class="xref-unresolved">{Imports}1.Zwlr_layer_surface_v1.Keyboard_interactivity.t</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Requests keyboard events.</p><p>Set how keyboard events are delivered to this surface. By default, layer shell surfaces do not receive keyboard events; this request can be used to change this.</p><p>This setting is inherited by child surfaces set by the get_popup request.</p><p>Layer surfaces receive pointer, touch, and tablet events normally. If you do not want to receive them, set the input region on your surface to an empty region.</p><p>Keyboard interactivity is double-buffered, see wl_surface.commit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_margin"><a href="#val-set_margin" class="anchor"></a><code><span><span class="keyword">val</span> set_margin : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">top</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">right</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">bottom</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">left</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Sets a margin from the anchor point.</p><p>Requests that the surface be placed some distance away from the anchor point on the output, in surface-local coordinates. Setting this value for edges you are not anchored to has no effect.</p><p>The exclusive zone includes the margin.</p><p>Margin is double-buffered, see wl_surface.commit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_exclusive_zone"><a href="#val-set_exclusive_zone" class="anchor"></a><code><span><span class="keyword">val</span> set_exclusive_zone : <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">zone</span>:int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Configures the exclusive geometry of this surface.</p><p>Requests that the compositor avoids occluding an area with other surfaces. The compositor's use of this information is implementation-dependent - do not assume that this region will not actually be occluded.</p><p>A positive value is only meaningful if the surface is anchored to one edge or an edge and both perpendicular edges. If the surface is not anchored, anchored to only two perpendicular edges (a corner), anchored to only two parallel edges or anchored to all edges, a positive value will be treated the same as zero.</p><p>A positive zone is the distance from the edge in surface-local coordinates to consider exclusive.</p><p>Surfaces that do not wish to have an exclusive zone may instead specify how they should interact with surfaces that do. If set to zero, the surface indicates that it would like to be moved to avoid occluding surfaces with a positive exclusive zone. If set to -1, the surface indicates that it would not like to be moved to accommodate for other surfaces, and the compositor should extend it all the way to the edges it is anchored to.</p><p>For example, a panel might set its exclusive zone to 10, so that maximized shell surfaces are not shown on top of it. A notification might set its exclusive zone to 0, so that it is moved to avoid occluding the panel, but shell surfaces are shown underneath it. A wallpaper or lock screen might set their exclusive zone to -1, so that they stretch below or over the panel.</p><p>The default value is 0.</p><p>Exclusive zone is double-buffered, see wl_surface.commit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_anchor"><a href="#val-set_anchor" class="anchor"></a><code><span><span class="keyword">val</span> set_anchor : <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">anchor</span>:int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Configures the anchor point of the surface.</p><p>Requests that the compositor anchor the surface to the specified edges and corners. If two orthogonal edges are specified (e.g. 'top' and 'left'), then the anchor point will be the intersection of the edges (e.g. the top left corner of the output); otherwise the anchor point will be centered on that edge, or in the center if none is specified.</p><p>Anchor is double-buffered, see wl_surface.commit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_size"><a href="#val-set_size" class="anchor"></a><code><span><span class="keyword">val</span> set_size : 
  <span><span><span>[&lt; `V1 <span>| `V2</span> <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">width</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">height</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Sets the size of the surface.</p><p>Sets the size of the surface in surface-local coordinates. The compositor will display the surface centered with respect to its anchors.</p><p>If you pass 0 for either value, the compositor will assign it and inform you of the assignment in the configure event. You must set your anchor to opposite edges in the dimensions you omit; not doing so is a protocol error. Both values are 0 by default.</p><p>Size is double-buffered, see wl_surface.commit.</p></div></div><h3 id="version-2,-3,-4"><a href="#version-2,-3,-4" class="anchor"></a>Version 2, 3, 4</h3><div class="odoc-spec"><div class="spec value anchored" id="val-set_layer"><a href="#val-set_layer" class="anchor"></a><code><span><span class="keyword">val</span> set_layer : 
  <span><span><span>[&lt; `V2 <span>| `V3</span> <span>| `V4</span> ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">layer</span>:<span class="xref-unresolved">{Imports}1.Zwlr_layer_shell_v1.Layer.t</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Change the layer of the surface.</p><p>Change the layer that the surface is rendered on.</p><p>Layer is double-buffered, see wl_surface.commit.</p></div></div><h3 id="handlers"><a href="#handlers" class="anchor"></a>Handlers</h3><p>Note: Servers will always want to use <code>v1</code>.</p><div class="odoc-spec"><div class="spec class anchored" id="class-v1"><a href="#class-v1" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v1/index.html">v1</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 1.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v2"><a href="#class-v2" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v2/index.html">v2</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 2.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v3"><a href="#class-v3" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v3/index.html">v3</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 3.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-v4"><a href="#class-v4" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> +'a </span><span><a href="class-v4/index.html">v4</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Handler for a proxy with version &gt;= 4.</p></div></div></div></body></html>
